function V(G,K,Q,X){if(!G&&!K)return;else if(!G)WG(K,Q,X);else if(!K)t(G,Q,X);else if(G.type===K.type)e(G,K,Q,X);else i(G,K,Q,X)}function i(G,K,Q,X){if(E(G),K.type==="vtext")K.domRef=X.createTextNode(K.text),X.replaceChild(Q,K.domRef,G.domRef);else X.replaceChild(Q,N(K,X),G.domRef);B(G)}function t(G,K,Q){E(G),Q.removeChild(K,G.domRef),B(G)}function e(G,K,Q,X){if(G.type==="vtext"&&K.type==="vtext"){if(G.text!==K.text)X.setTextContent(G.domRef,K.text);K.domRef=G.domRef;return}if(K.tag===G.tag&&K.key===G.key&&K.type===G.type)K.domRef=G.domRef,D(G,K,X);else i(G,K,Q,X)}function B(G){GG(G);for(let K in G.children)B(G.children[K])}function GG(G){if(G.onDestroyed)G.onDestroyed();if(G.type==="vcomp")zG(G)}function KG(G){if(G.onBeforeDestroyed)G.onBeforeDestroyed(G.domRef)}function E(G){if(G.type==="vcomp"&&G.onBeforeUnmounted)G.onBeforeUnmounted(G.domRef);KG(G);for(let K in G.children)E(G.children[K])}function J(G,K){if(G.onCreated)G.onCreated(G.domRef);if(G.type==="vcomp")HG(G,K)}function QG(G){if(G.onBeforeCreated)G.onBeforeCreated()}function D(G,K,Q){if(K.type!=="vtext"){if(XG(G?G.props:{},K.props,K.domRef,K.ns==="svg",Q),UG(G?G.classList:null,K.classList,K.domRef,Q),YG(G?G.css:{},K.css,K.domRef,Q),K.type==="vnode")_G(G?G.children:[],K.children,K.domRef,Q);qG(K)}}function UG(G,K,Q,X){if(!G&&!K)return;if(!G){for(let U of K)X.addClass(U,Q);return}if(!K){for(let U of G)X.removeClass(U,Q);return}for(let U of G)if(!K.has(U))X.removeClass(U,Q);for(let U of K)if(!G.has(U))X.addClass(U,Q);return}function XG(G,K,Q,X,U){var Z;for(let Y in G)if(Z=K[Y],Z===void 0)if(X||!(Y in Q)||Y==="disabled")U.removeAttribute(Q,Y);else U.setAttribute(Q,Y,"");else{if(Z===G[Y]&&Y!=="checked"&&Y!=="value")continue;if(X)if(Y==="href")U.setAttributeNS(Q,"http://www.w3.org/1999/xlink","href",Z);else U.setAttribute(Q,Y,Z);else if(Y in Q&&!(Y==="list"||Y==="form"))Q[Y]=Z;else U.setAttribute(Q,Y,Z)}for(let Y in K){if(G&&G[Y])continue;if(Z=K[Y],X)if(Y==="href")U.setAttributeNS(Q,"http://www.w3.org/1999/xlink","href",Z);else U.setAttribute(Q,Y,Z);else if(Y in Q&&!(Y==="list"||Y==="form"))Q[Y]=K[Y];else U.setAttribute(Q,Y,Z)}}function YG(G,K,Q,X){X.setInlineStyle(G,K,Q)}function ZG(G,K){if(G.length===0||K.length===0)return!1;for(var Q=0;Q<G.length;Q++)if(G[Q].key===null||G[Q].key===void 0)return!1;for(var Q=0;Q<K.length;Q++)if(K[Q].key===null||K[Q].key===void 0)return!1;return!0}function _G(G,K,Q,X){if(ZG(G,K))VG(G,K,Q,X);else for(let U=0;U<Math.max(K.length,G.length);U++)V(G[U],K[U],Q,X)}function $G(G,K){if(G.ns==="svg")G.domRef=K.createElementNS("http://www.w3.org/2000/svg",G.tag);else if(G.ns==="mathml")G.domRef=K.createElementNS("http://www.w3.org/1998/Math/MathML",G.tag);else G.domRef=K.createElement(G.tag)}function N(G,K){return QG(G),$G(G,K),J(G,K),D(null,G,K),G.domRef}function qG(G){if(G.tag==="canvas"&&"draw"in G)G.draw(G.domRef)}function zG(G){if("onUnmounted"in G)G.onUnmounted(G.domRef);G.unmount(G.domRef)}function HG(G,K){if(G.onBeforeMounted)G.onBeforeMounted();G.mount(G,(Q,X)=>{if(G.children.push(X),K.appendChild(G.domRef,X.domRef),G.onMounted)G.onMounted(G.domRef)})}function WG(G,K,Q){if(G.type==="vtext")G.domRef=Q.createTextNode(G.text),Q.appendChild(K,G.domRef);else Q.appendChild(K,N(G,Q))}function VG(G,K,Q,X){var U=0,Z=0,Y=G.length-1,_=K.length-1,z,q,$,H,W,R,b;for(;;){if(Z>_&&U>Y)break;if(q=K[Z],$=K[_],W=G[U],H=G[Y],U>Y)V(null,q,Q,X),X.insertBefore(Q,q.domRef,W?W.domRef:null),G.splice(Z,0,q),Z++;else if(Z>_){z=Y;while(Y>=U)X.removeChild(Q,G[Y--].domRef);G.splice(U,z-U+1);break}else if(W.key===q.key)V(G[U++],K[Z++],Q,X);else if(H.key===$.key)V(G[Y--],K[_--],Q,X);else if(W.key===$.key&&q.key===H.key)X.swapDOMRefs(H.domRef,W.domRef,Q),AG(G,U,Y),V(G[U++],K[Z++],Q,X),V(G[Y--],K[_--],Q,X);else if(W.key===$.key)X.insertBefore(Q,W.domRef,X.nextSibling(H)),G.splice(Y,0,G.splice(U,1)[0]),V(G[Y--],K[_--],Q,X);else if(H.key===q.key)X.insertBefore(Q,H.domRef,W.domRef),G.splice(U,0,G.splice(Y,1)[0]),V(G[U++],q,Q,X),Z++;else{R=!1,z=U;while(z<=Y){if(G[z].key===q.key){R=!0,b=G[z];break}z++}if(R)G.splice(U,0,G.splice(z,1)[0]),V(G[U++],q,Q,X),X.insertBefore(Q,b.domRef,G[U].domRef),Z++;else X.insertBefore(Q,N(q,X),W.domRef),G.splice(U++,0,q),Z++,Y++}}}function AG(G,K,Q){let X=G[K];G[K]=G[Q],G[Q]=X}function S(G,K,Q,X,U){for(let Z of K)U.addEventListener(G,Z.name,function(Y){x(Y,G,Q,X,U)},Z.capture)}function M(G,K,Q,X,U){for(let Z of K)U.removeEventListener(G,Z.name,function(Y){x(Y,G,Q,X,U)},Z.capture)}function x(G,K,Q,X,U){Q(function(Z){if(Array.isArray(G))for(let Y of G)v(Y,Z,K,X,U);else v(G,Z,K,X,U)})}function v(G,K,Q,X,U){var Z=U.getTarget(G);if(Z){let Y=JG(Q,Z,U);p(G,K,Y,X,U)}}function JG(G,K,Q){var X=[];while(!Q.isEqual(G,K))if(X.unshift(K),K&&Q.parentNode(K))K=Q.parentNode(K);else return X;return X}function p(G,K,Q,X,U){if(!Q.length){if(X)console.warn('Event "'+G.type+'" did not find an event handler to dispatch on',K,G);return}else if(Q.length>1){if(U.isEqual(K.domRef,Q[0])){if(K.type==="vnode"){let Z=K.events.captures[G.type];if(Z){let Y=Z.options;if(Y.preventDefault)G.preventDefault();if(!G.captureStopped)Z.runEvent(G,K.domRef);if(Y.stopPropagation)G.captureStopped=!0}}Q.splice(0,1)}for(let Z of K.children)if(U.isEqual(Z.domRef,Q[0]))p(G,Z,Q,X,U)}else if(K.type==="vnode"){let Z=K.events.captures[G.type];if(Z&&!G.captureStopped){let _=Z.options;if(U.isEqual(Q[0],K.domRef)){if(_.preventDefault)G.preventDefault();if(Z.runEvent(G,Q[0]),_.stopPropagation)G.captureStopped=!0}}let Y=K.events.bubbles[G.type];if(Y&&!G.captureStopped){let _=Y.options;if(U.isEqual(Q[0],K.domRef)){if(_.preventDefault)G.preventDefault();if(Y.runEvent(G,Q[0]),!_.stopPropagation)l(K.parent,G)}}else if(!G.captureStopped)l(K.parent,G)}}function l(G,K){while(G)switch(G.type){case"vtext":break;case"vnode":let Q=G.events.bubbles[K.type];if(Q){let X=Q.options;if(X.preventDefault)K.preventDefault();if(Q.runEvent(K,G.domRef),X.stopPropagation)return}G=G.parent;break;case"vcomp":if(!G.eventPropagation)return;G=G.parent;break}}function A(G,K){if(typeof G[0]==="object"){var Q=[];for(var X=0;X<G.length;X++)Q.push(A(G[X],K));return Q}for(let _ of G)K=K[_];var U;if(K instanceof Array||"length"in K&&K.localName!=="select"){U=[];for(var Z=0;Z<K.length;Z++)U.push(A([],K[Z]));return U}U={};for(var Y in DG(K)){if(K.localName==="input"&&(Y==="selectionDirection"||Y==="selectionStart"||Y==="selectionEnd"))continue;if(typeof K[Y]=="string"||typeof K[Y]=="number"||typeof K[Y]=="boolean")U[Y]=K[Y]}return U}function DG(G){var K={},Q=0;do{var X=Object.getOwnPropertyNames(G);for(Q=0;Q<X.length;Q++)K[X[Q]]=null}while(G=Object.getPrototypeOf(G));return K}function RG(G){var K=0,Q=G.length>0?[G[0]]:[];for(var X=1;X<G.length;X++){if(Q[K].type==="vtext"&&G[X].type==="vtext"){Q[K].text+=G[X].text;continue}Q[++K]=G[X]}return Q}function BG(G,K){var Q=0,X,U=K.getRoot();if(!G)if(U.childNodes.length>0)X=U.firstChild;else X=U.appendChild(K.createElement("div"));else if(G.childNodes.length===0)X=G.appendChild(K.createElement("div"));else{while(G.childNodes[Q]&&(G.childNodes[Q].nodeType===3||G.childNodes[Q].localName==="script"))Q++;if(!G.childNodes[Q])X=U.appendChild(K.createElement("div"));else X=G.childNodes[Q]}return X}function P(G,K,Q,X,U){let Z=BG(K,U);if(!r(G,Q,Z,X,U)){if(G)console.warn("[DEBUG_HYDRATE] Could not copy DOM into virtual DOM, falling back to diff");while(X.firstChild(Z))U.removeChild(Z,X.lastChild(Z));return Q.domRef=Z,D(null,Q,U),!1}else if(G)console.info("[DEBUG_HYDRATE] Successfully prerendered page");return!0}function T(G,K,Q){if(G)console.warn("[DEBUG_HYDRATE] VTree differed from node",K,Q)}function d(G){if(G.substr(0,1)=="#"){let K=(G.length-1)/3,Q=[17,1,0.062272][K-1];return[Math.round(parseInt(G.substr(1,K),16)*Q),Math.round(parseInt(G.substr(1+K,K),16)*Q),Math.round(parseInt(G.substr(1+2*K,K),16)*Q)]}else return G.split("(")[1].split(")")[0].split(",").map((K)=>{return+K})}function L(G,K,Q){return a(!0,G,K,Q)}function a(G,K,Q,X){if(K.type=="vtext"){if(Q.getTag(K.domRef)!=="#text")console.warn("VText domRef not a TEXT_NODE",K),G=!1;else if(K.text!==Q.getTextContent(K.domRef))console.warn("VText node content differs",K),G=!1}else{if(K.tag.toUpperCase()!==Q.getTag(K.domRef).toUpperCase())console.warn("Integrity check failed, tags differ",K.tag.toUpperCase(),Q.getTag(K.domRef)),G=!1;if("children"in K&&K.children.length!==Q.children(K.domRef).length)console.warn("Integrity check failed, children lengths differ",K,K.children,Q.children(K.domRef)),G=!1;for(let U in K.props)if(U==="href"||U==="src"){let Z=window.location.origin+"/"+K.props[U],Y=Q.getAttribute(K.domRef,U),_=K.props[U];if(Z!==Y&&_!==Y&&_+"/"!==Y&&Z+"/"!==Y)console.warn("Property "+U+" differs",K.props[U],Q.getAttribute(K.domRef,U)),G=!1}else if(U==="height"||U==="width"){if(parseFloat(K.props[U])!==parseFloat(Q.getAttribute(K.domRef,U)))console.warn("Property "+U+" differs",K.props[U],Q.getAttribute(K.domRef,U)),G=!1}else if(U==="class"||U==="className"){if(K.props[U]!==Q.getAttribute(K.domRef,"class"))console.warn("Property class differs",K.props[U],Q.getAttribute(K.domRef,"class")),G=!1}else if(K.props[U]!==Q.getAttribute(K.domRef,U))console.warn("Property "+U+" differs",K.props[U],Q.getAttribute(K.domRef,U)),G=!1;for(let U in K.css)if(U==="color"){if(d(Q.getInlineStyle(K.domRef,U)).toString()!==d(K.css[U]).toString())console.warn("Style "+U+" differs",K.css[U],Q.getInlineStyle(K.domRef,U)),G=!1}else if(K.css[U]!==Q.getInlineStyle(K.domRef,U))console.warn("Style "+U+" differs",K.css[U],Q.getInlineStyle(K.domRef,U)),G=!1;for(let U of K.children){let Z=a(G,U,Q,X);G=G&&Z}}return G}function r(G,K,Q,X,U){switch(K.type){case"vcomp":K.domRef=Q,J(K,U);break;case"vtext":K.domRef=Q;break;default:K.domRef=Q,K.children=RG(K.children),J(K,U);for(var Z=0;Z<K.children.length;Z++){let Y=K.children[Z],_=Q.childNodes[Z];if(!_)return T(G,Y,_),!1;switch(Y.type){case"vtext":if(_.nodeType!==3)return T(G,Y,_),!1;if(Y.text===_.textContent)Y.domRef=X.children(Q)[Z];else return T(G,Y,_),!1;break;default:if(_.nodeType!==1)return!1;Y.domRef=_,r(G,Y,_,X,U);break}}}return!0}var F="1.9.0.0";function I(G,K){var Q=function(){var X=document.getElementById(G);if(X&&X.focus)X.focus()};K>0?setTimeout(Q,K):Q()}function O(G,K){var Q=function(){var X=document.getElementById(G);if(X&&X.blur)X.blur()};K>0?setTimeout(Q,K):Q()}function f(G,K){var Q=function(){var X=document.getElementById(G);if(X&&typeof X.select==="function")X.select()};K>0?setTimeout(Q,K):Q()}function w(G,K,Q,X){var U=function(){var Z=document.getElementById(G);if(Z&&typeof Z.setSelectionRange==="function")Z.setSelectionRange(K,Q,"none")};X>0?setTimeout(U,X):U()}function C(G,K,Q,X,U,Z,Y){var _={method:K,headers:X};if(Q)_.body=Q;let z={},q=null;try{fetch(G,_).then(($)=>{q=$.status;for(let[H,W]of $.headers)z[H]=W;if(!$.ok)throw new Error($.statusText);if(Y=="json")return $.json();else if(Y=="text")return $.text();else if(Y==="arrayBuffer")return $.arrayBuffer();else if(Y==="blob")return $.blob();else if(Y==="bytes")return $.bytes();else if(Y==="formData")return $.formData();else if(Y==="none")return U({error:null,body:null,headers:z,status:q})}).then(($)=>U({error:null,body:$,headers:z,status:q})).catch(($)=>Z({error:null,body:$,headers:z,status:q}))}catch($){Z({body:null,error:$.message,headers:z,status:q})}}function k(G){var K=function(Q){let X=null;while(Q&&Q.parentNode){if("componentId"in Q.parentNode){X=Q.parentNode.componentId;break}Q=Q.parentNode}return X};return K(G)}function y(G,K,Q,X,U,Z,Y,_,z){try{let q=new WebSocket(G);return q.onopen=function(){K()},q.onclose=function($){Q($)},q.onerror=function($){console.error($),_("WebSocket error received")},q.onmessage=function($){if(typeof $.data==="string")try{if(z){if(X)X($.data);return}let H=JSON.parse($.data);if(U)U(H)}catch(H){if(z&&X)X($.data);else _(H.message)}else if($.data instanceof Blob){if(Z)Z($.data)}else if($.data instanceof ArrayBuffer){if(Y)Y($.data)}else console.error("Received unknown message type from WebSocket",$),_("Unknown message received from WebSocket")},q}catch(q){_(q.message)}}function g(G){if(G)G.close(),G=null}function h(G,K){if(K&&G&&G.readyState===WebSocket.OPEN)G.send(K)}function u(G,K,Q,X,U,Z){try{let Y=new EventSource(G);return Y.onopen=function(){K()},Y.onerror=function(){U("EventSource error received")},Y.onmessage=function(_){try{if(Z){if(Q)Q(_.data);return}let z=JSON.parse(_.data);if(X)X(z)}catch(z){if(Z&&Q)Q(_.data);else U(z.message)}},Y}catch(Y){U(Y.message)}}function m(G){if(G)G.close(),G=null}function j(G,K){if(!G.classList)G.classList=new Set;for(let Q of K)for(let X of Q.trim().split(" "))if(X)G.classList.add(X)}var c={addEventListener:(G,K,Q,X)=>{G.addEventListener(K,Q,X)},removeEventListener:(G,K,Q,X)=>{G.removeEventListener(K,Q,X)},isEqual:(G,K)=>{return G===K},getTarget:(G)=>{return G.target},parentNode:(G)=>{return G.parentNode}},s={getInlineStyle:(G,K)=>{return G.style[K]},firstChild:(G)=>{return G.firstChild},lastChild:(G)=>{return G.lastChild},getAttribute:(G,K)=>{if(K==="class")return G.className;if(K in G)return G[K];return G.getAttribute(K)},getTag:(G)=>{return G.nodeName},getTextContent:(G)=>{return G.textContent},children:(G)=>{return G.childNodes}},o={mountComponent:function(G,K,Q){return},unmountComponent:function(G){return},modelHydration:function(G){return}},n={nextSibling:(G)=>{return G.domRef.nextSibling},createTextNode:(G)=>{return document.createTextNode(G)},createElementNS:(G,K)=>{return document.createElementNS(G,K)},appendChild:(G,K)=>{return G.appendChild(K)},replaceChild:(G,K,Q)=>{return G.replaceChild(K,Q)},removeChild:(G,K)=>{return G.removeChild(K)},createElement:(G)=>{return document.createElement(G)},addClass:(G,K)=>{if(G)K.classList.add(G)},removeClass:(G,K)=>{if(G)K.classList.remove(G)},insertBefore:(G,K,Q)=>{return G.insertBefore(K,Q)},swapDOMRefs:(G,K,Q)=>{let X=G.nextSibling;Q.insertBefore(G,K),Q.insertBefore(K,X);return},setInlineStyle:(G,K,Q)=>{var X;for(let U in G)if(X=K[U],!X)if(U in Q.style)Q.style[U]="";else Q.style.setProperty(U,"");else if(X!==G[U])if(U in Q.style)Q.style[U]=X;else Q.style.setProperty(U,X);for(let U in K){if(G&&G[U])continue;if(U in Q.style)Q.style[U]=K[U];else Q.style.setProperty(U,K[U])}return},setAttribute:(G,K,Q)=>{return G.setAttribute(K,Q)},setAttributeNS:(G,K,Q,X)=>{return G.setAttributeNS(K,Q,X)},removeAttribute:(G,K)=>{return G.removeAttribute(K)},setTextContent:(G,K)=>{G.textContent=K;return},flush:()=>{return},getRoot:function(){return document.body}};globalThis.miso={hydrationContext:s,eventContext:c,drawingContext:n,componentContext:o,diff:V,hydrate:P,version:F,delegate:S,callBlur:O,callFocus:I,callSelect:f,callSetSelectionRange:w,eventJSON:A,fetchCore:C,eventSourceConnect:u,eventSourceClose:m,websocketConnect:y,websocketClose:g,websocketSend:h,undelegate:M,populateClass:j,getParentComponentId:k,integrityCheck:L,setDrawingContext:function(G){let K=globalThis[G].drawingContext,Q=globalThis[G].eventContext;if(!K)console.error('Custom rendering engine ("drawingContext") is not defined at globalThis[name].drawingContext',G);if(!Q)console.error('Custom event delegation ("eventContext") is not defined at globalThis[name].eventContext',G);globalThis.miso.drawingContext=K,globalThis.miso.eventContext=Q}};
