var F="1.9.0.0";function L(U,z){var G=function(){var H=document.getElementById(U);if(H&&H.focus)H.focus()};z>0?setTimeout(G,z):G()}function I(U,z){var G=function(){var H=document.getElementById(U);if(H&&H.blur)H.blur()};z>0?setTimeout(G,z):G()}function w(U,z){var G=function(){var H=document.getElementById(U);if(H&&typeof H.select==="function")H.select()};z>0?setTimeout(G,z):G()}function V(U,z,G,H){var K=function(){var X=document.getElementById(U);if(X&&typeof X.setSelectionRange==="function")X.setSelectionRange(z,G,"none")};H>0?setTimeout(K,H):K()}function O(U,z,G,H,K,X,Q){var Z={method:z,headers:H};if(G)Z.body=G;let _={},$=null;try{fetch(U,Z).then((Y)=>{$=Y.status;for(let[W,J]of Y.headers)_[W]=J;if(!Y.ok)throw Error(Y.statusText);if(Q=="json")return Y.json();else if(Q=="text")return Y.text();else if(Q==="arrayBuffer")return Y.arrayBuffer();else if(Q==="blob")return Y.blob();else if(Q==="bytes")return Y.bytes();else if(Q==="formData")return Y.formData();else if(Q==="none")return K({error:null,body:null,headers:_,status:$})}).then((Y)=>K({error:null,body:Y,headers:_,status:$})).catch((Y)=>X({error:null,body:Y,headers:_,status:$}))}catch(Y){X({body:null,error:Y.message,headers:_,status:$})}}function P(U,z,G,H,K,X,Q,Z,_){try{let $=new WebSocket(U);return $.onopen=function(){z()},$.onclose=function(Y){G(Y)},$.onerror=function(Y){console.error(Y),Z("WebSocket error received")},$.onmessage=function(Y){if(typeof Y.data==="string")try{if(_){if(H)H(Y.data);return}let W=JSON.parse(Y.data);if(K)K(W)}catch(W){if(_&&H)H(Y.data);else Z(W.message)}else if(Y.data instanceof Blob){if(X)X(Y.data)}else if(Y.data instanceof ArrayBuffer){if(Q)Q(Y.data)}else console.error("Received unknown message type from WebSocket",Y),Z("Unknown message received from WebSocket")},$}catch($){Z($.message)}}function f(U){if(U)U.close(),U=null}function j(U,z){if(z&&U&&U.readyState===WebSocket.OPEN)U.send(z)}function b(U,z,G,H,K,X){try{let Q=new EventSource(U);return Q.onopen=function(){z()},Q.onerror=function(){K("EventSource error received")},Q.onmessage=function(Z){try{if(X){if(G)G(Z.data);return}let _=JSON.parse(Z.data);if(H)H(_)}catch(_){if(X&&G)G(Z.data);else K(_.message)}},Q}catch(Q){K(Q.message)}}function T(U){if(U)U.close(),U=null}function k(U,z){if(!U.classList)U.classList=new Set;for(let G of z)for(let H of G.trim().split(" "))if(H)U.classList.add(H)}function h(U,z){if(!U.parent)return;z.nextSibling=U.nextSibling?null:U.nextSibling,z.parent=U.parent,U.parent.child=z}function g(U,z={}){let G=Object.keys(z),H=Object.values(z);return Function(...G,U)(...H)}function m(U){if(U===null||U===void 0)return 0;if(typeof U==="number")return 1;if(typeof U==="string")return 2;if(typeof U==="boolean")return 3;if(Array.isArray(U))return 4;return 5}function y(U){return function(){U|=0,U=U+2654435769|0;var z=U^U>>>15;return z=Math.imul(z,2246822507),z=z^z>>>13,z=Math.imul(z,3266489909),((z^z>>>16)>>>0)/4294967296}}function u(){let U=new Uint32Array(1);return crypto.getRandomValues(U)[0]}function v(){return Math.random()}function q(U){switch(U.type){case 0:return S(U);default:return U.domRef}}function S(U){if(!U.child)throw Error("'drill' called on an unmounted Component. This should never happen, please make an issue.");switch(U.child.type){case 0:return S(U.child);default:return U.child.domRef}}function A(U,z,G,H){if(!U&&!z)return;else if(!U)BU(z,G,H);else if(!z)c(U,G,H);else if(U.type===2&&z.type===2)XU(U,z,H);else if(U.type===0&&z.type===0){if(z.key===U.key){if(z.child=U.child,z.componentId=U.componentId,U.child)U.child.parent=z;return}l(U,z,G,H)}else if(U.type===1&&z.type===1)if(z.tag===U.tag&&z.key===U.key)z.domRef=U.domRef,o(U,z,H);else l(U,z,G,H);else l(U,z,G,H)}function XU(U,z,G){if(U.text!==z.text)G.setTextContent(U.domRef,z.text);z.domRef=U.domRef;return}function l(U,z,G,H){switch(U.type){case 2:break;default:M(U);break}switch(i(G,1,q(U),z,H),U.type){case 2:break;default:R(U);break}}function c(U,z,G){switch(U.type){case 2:break;default:M(U);break}switch(G.removeChild(z,q(U)),U.type){case 2:break;default:R(U);break}}function R(U){switch(YU(U),U.type){case 1:for(let z of U.children)if(z.type===1||z.type===0)R(z);break;case 0:if(U.child){if(U.child.type===1||U.child.type===0)R(U.child)}break}}function YU(U){if(U.type===1&&U.onDestroyed)U.onDestroyed();if(U.type===0)DU(U)}function ZU(U){switch(U.type){case 0:break;case 1:if(U.onBeforeDestroyed)U.onBeforeDestroyed();break;default:break}}function M(U){switch(ZU(U),U.type){case 1:for(let z of U.children){if(z.type===2)continue;M(z)}break;case 0:if(U.child){if(U.child.type===1||U.child.type===0)M(U.child)}break}}function o(U,z,G){_U(U?U.props:{},z.props,z.domRef,z.ns==="svg",G),$U(U?U.classList:null,z.classList,z.domRef,G),WU(U?U.css:{},z.css,z.domRef,G),AU(U?U.children:[],z.children,z.domRef,G),EU(z)}function $U(U,z,G,H){if(!U&&!z)return;if(!U){for(let K of z)H.addClass(K,G);return}if(!z){for(let K of U)H.removeClass(K,G);return}for(let K of U)if(!z.has(K))H.removeClass(K,G);for(let K of z)if(!U.has(K))H.addClass(K,G);return}function _U(U,z,G,H,K){var X;for(let Q in U)if(X=z[Q],X===void 0)if(H||!(Q in G)||Q==="disabled")K.removeAttribute(G,Q);else K.setAttribute(G,Q,"");else{if(X===U[Q]&&Q!=="checked"&&Q!=="value")continue;if(H)if(Q==="href")K.setAttributeNS(G,"http://www.w3.org/1999/xlink","href",X);else K.setAttribute(G,Q,X);else if(Q in G&&!(Q==="list"||Q==="form"))G[Q]=X;else K.setAttribute(G,Q,X)}for(let Q in z){if(U&&U[Q])continue;if(X=z[Q],H)if(Q==="href")K.setAttributeNS(G,"http://www.w3.org/1999/xlink","href",X);else K.setAttribute(G,Q,X);else if(Q in G&&!(Q==="list"||Q==="form"))G[Q]=z[Q];else K.setAttribute(G,Q,X)}}function WU(U,z,G,H){H.setInlineStyle(U,z,G)}function qU(U,z){if(U.length===0||z.length===0)return!1;for(var G=0;G<U.length;G++)if(U[G].key===null||U[G].key===void 0)return!1;for(var G=0;G<z.length;G++)if(z[G].key===null||z[G].key===void 0)return!1;return!0}function AU(U,z,G,H){if(qU(U,z))RU(U,z,G,H);else for(let K=0;K<Math.max(z.length,U.length);K++)A(U[K],z[K],G,H)}function JU(U,z){if(U.ns==="svg")U.domRef=z.createElementNS("http://www.w3.org/2000/svg",U.tag);else if(U.ns==="mathml")U.domRef=z.createElementNS("http://www.w3.org/1998/Math/MathML",U.tag);else U.domRef=z.createElement(U.tag)}function n(U,z,G){if(z.onCreated)z.onCreated(z.domRef)}function i(U,z,G,H,K){switch(H.type){case 2:switch(H.domRef=K.createTextNode(H.text),z){case 2:K.insertBefore(U,H.domRef,G);break;case 0:K.appendChild(U,H.domRef);break;case 1:K.replaceChild(U,H.domRef,G);break}break;case 0:SU(U,z,G,H,K);break;case 1:if(H.onBeforeCreated)H.onBeforeCreated();if(JU(H,K),H.onCreated)H.onCreated(H.domRef);switch(o(null,H,K),z){case 2:K.insertBefore(U,H.domRef,G);break;case 0:K.appendChild(U,H.domRef);break;case 1:K.replaceChild(U,H.domRef,G);break}break}}function EU(U){if(U.tag==="canvas"&&U.draw)U.draw(U.domRef)}function DU(U){U.unmount(U.componentId)}function SU(U,z,G,H,K){let X=H.mount(U);if(H.componentId=X.componentId,H.child=X.componentTree,X.componentTree.parent=H,X.componentTree.type!==0){let Q=q(X.componentTree);if(z===1&&G)K.replaceChild(U,Q,G);else if(z===2)K.insertBefore(U,Q,G)}}function BU(U,z,G){i(z,0,null,U,G)}function N(U,z,G,H){H.insertBefore(U,q(z),G?q(G):null)}function NU(U,z,G,H){H.swapDOMRefs(q(U),q(z),G)}function RU(U,z,G,H){var K=0,X=0,Q=U.length-1,Z=z.length-1,_,$,Y,W,J,C,r;for(;;){if(X>Z&&K>Q)break;if($=z[X],Y=z[Z],J=U[K],W=U[Q],K>Q)A(null,$,G,H),N(G,$,J,H),U.splice(X,0,$),X++;else if(X>Z){_=Q;while(Q>=K)c(U[Q--],G,H);U.splice(K,_-K+1);break}else if(J.key===$.key)A(U[K++],z[X++],G,H);else if(W.key===Y.key)A(U[Q--],z[Z--],G,H);else if(J.key===Y.key&&$.key===W.key)NU(W,J,G,H),MU(U,K,Q),A(U[K++],z[X++],G,H),A(U[Q--],z[Z--],G,H);else if(J.key===Y.key)N(G,J,W.nextSibling,H),U.splice(Q,0,U.splice(K,1)[0]),A(U[Q--],z[Z--],G,H);else if(W.key===$.key)N(G,W,J,H),U.splice(K,0,U.splice(Q,1)[0]),A(U[K++],$,G,H),X++;else{C=!1,_=K;while(_<=Q){if(U[_].key===$.key){C=!0,r=U[_];break}_++}if(C)U.splice(K,0,U.splice(_,1)[0]),A(U[K++],$,G,H),N(G,r,U[K],H),X++;else i(G,2,q(J),$,H),U.splice(K++,0,$),X++,Q++}}}function MU(U,z,G){let H=U[z];U[z]=U[G],U[G]=H}function UU(U,z,G,H,K){for(let X of z)K.addEventListener(U,X.name,function(Q){CU(Q,U,G,H,K)},X.capture)}function CU(U,z,G,H,K){G(function(X){if(Array.isArray(U))for(let Q of U)t(Q,X,z,H,K);else t(U,X,z,H,K)})}function t(U,z,G,H,K){var X=K.getTarget(U);if(X){let Q=FU(G,X,K);D(U,z,Q,H,K)}}function FU(U,z,G){var H=[];while(!G.isEqual(U,z))if(H.unshift(z),z&&G.parentNode(z))z=G.parentNode(z);else return H;return H}function D(U,z,G,H,K){if(!G.length){if(H)console.warn('Event "'+U.type+'" did not find an event handler to dispatch on',z,U);return}else if(G.length>1){if(z.type===2)return;else if(z.type===0){if(!z.child){if(H)throw console.error("VComp has no child property set during event delegation",z),console.error("This means the Component has not been fully mounted, this should never happen"),Error("VComp has no .child property set during event delegation");return}return D(U,z.child,G,H,K)}else if(z.type===1){if(K.isEqual(z.domRef,G[0])){let X=z.events.captures[U.type];if(X){let Q=X.options;if(Q.preventDefault)U.preventDefault();if(!U.captureStopped)X.runEvent(U,z.domRef);if(Q.stopPropagation)U.captureStopped=!0}G.splice(0,1);for(let Q of z.children)if(K.isEqual(q(Q),G[0]))D(U,Q,G,H,K)}return}}else if(z.type===0){if(z.child)D(U,z.child,G,H,K)}else if(z.type===1){let X=z.events.captures[U.type];if(X&&!U.captureStopped){let Z=X.options;if(K.isEqual(G[0],z.domRef)){if(Z.preventDefault)U.preventDefault();if(X.runEvent(U,G[0]),Z.stopPropagation)U.captureStopped=!0}}let Q=z.events.bubbles[U.type];if(Q&&!U.captureStopped){let Z=Q.options;if(K.isEqual(G[0],z.domRef)){if(Z.preventDefault)U.preventDefault();if(Q.runEvent(U,G[0]),!Z.stopPropagation)e(z.parent,U)}}else if(!U.captureStopped)e(z.parent,U)}}function e(U,z){while(U)switch(U.type){case 2:break;case 1:let G=U.events.bubbles[z.type];if(G){let H=G.options;if(H.preventDefault)z.preventDefault();if(G.runEvent(z,U.domRef),H.stopPropagation)return}U=U.parent;break;case 0:if(!U.eventPropagation)return;U=U.parent;break}}function B(U,z){if(typeof U[0]==="object"){var G=[];for(var H=0;H<U.length;H++)G.push(B(U[H],z));return G}for(let Z of U)z=z[Z];var K;if(z instanceof Array||"length"in z&&z.localName!=="select"){K=[];for(var X=0;X<z.length;X++)K.push(B([],z[X]));return K}K={};for(var Q in LU(z)){if(z.localName==="input"&&(Q==="selectionDirection"||Q==="selectionStart"||Q==="selectionEnd"))continue;if(typeof z[Q]=="string"||typeof z[Q]=="number"||typeof z[Q]=="boolean")K[Q]=z[Q]}return K}function LU(U){var z={},G=0;do{var H=Object.getOwnPropertyNames(U);for(G=0;G<H.length;G++)z[H[G]]=null}while(U=Object.getPrototypeOf(U));return z}function IU(U){var z=0,G=U.length>0?[U[0]]:[];for(var H=1;H<U.length;H++){if(G[z].type===2&&U[H].type===2){G[z].text+=U[H].text;continue}G[++z]=U[H]}return G}function d(U,z,G,H,K){if(!G||!z)return!1;if(z.nodeType===3)return!1;if(!p(U,G,H.firstChild(z),H,K)){if(U)console.warn("[DEBUG_HYDRATE] Could not copy DOM into virtual DOM, falling back to diff");while(H.firstChild(z))K.removeChild(z,H.lastChild(z));return!1}else if(U)console.info("[DEBUG_HYDRATE] Successfully prerendered page");return!0}function x(U,z,G){if(U)console.warn("[DEBUG_HYDRATE] VTree differed from node",z,G)}function zU(U){if(U.substr(0,1)=="#"){let z=(U.length-1)/3,G=[17,1,0.062272][z-1];return[Math.round(parseInt(U.substr(1,z),16)*G),Math.round(parseInt(U.substr(1+z,z),16)*G),Math.round(parseInt(U.substr(1+2*z,z),16)*G)]}else return U.split("(")[1].split(")")[0].split(",").map((z)=>{return+z})}function a(U,z,G){return GU(!0,U,z,G)}function GU(U,z,G,H){if(z.type==2){if(G.getTag(z.domRef)!=="#text")console.warn("VText domRef not a TEXT_NODE",z),U=!1;else if(z.text!==G.getTextContent(z.domRef))console.warn("VText node content differs",z),U=!1}else if(z.type===1){if(z.tag.toUpperCase()!==G.getTag(z.domRef).toUpperCase())console.warn("Integrity check failed, tags differ",z.tag.toUpperCase(),G.getTag(z.domRef)),U=!1;if("children"in z&&z.children.length!==G.children(z.domRef).length)console.warn("Integrity check failed, children lengths differ",z,z.children,G.children(z.domRef)),U=!1;for(let K in z.props)if(K==="href"||K==="src"){let X=window.location.origin+"/"+z.props[K],Q=G.getAttribute(z.domRef,K),Z=z.props[K];if(X!==Q&&Z!==Q&&Z+"/"!==Q&&X+"/"!==Q)console.warn("Property "+K+" differs",z.props[K],G.getAttribute(z.domRef,K)),U=!1}else if(K==="height"||K==="width"){if(parseFloat(z.props[K])!==parseFloat(G.getAttribute(z.domRef,K)))console.warn("Property "+K+" differs",z.props[K],G.getAttribute(z.domRef,K)),U=!1}else if(K==="class"||K==="className"){if(z.props[K]!==G.getAttribute(z.domRef,"class"))console.warn("Property class differs",z.props[K],G.getAttribute(z.domRef,"class")),U=!1}else if(z.props[K]!==G.getAttribute(z.domRef,K))console.warn("Property "+K+" differs",z.props[K],G.getAttribute(z.domRef,K)),U=!1;for(let K in z.css)if(K==="color"){if(zU(G.getInlineStyle(z.domRef,K)).toString()!==zU(z.css[K]).toString())console.warn("Style "+K+" differs",z.css[K],G.getInlineStyle(z.domRef,K)),U=!1}else if(z.css[K]!==G.getInlineStyle(z.domRef,K))console.warn("Style "+K+" differs",z.css[K],G.getInlineStyle(z.domRef,K)),U=!1;for(let K of z.children){let X=GU(U,K,G,H);U=U&&X}}return U}function p(U,z,G,H,K){switch(z.type){case 0:let Q=z.mount(G.parentNode);if(z.componentId=Q.componentId,z.child=Q.componentTree,Q.componentTree.parent=z,!p(U,z.child,G,H,K))return!1;break;case 2:if(G.nodeType!==3||z.text.trim()!==G.textContent.trim())return x(U,z,G),!1;z.domRef=G;break;case 1:if(G.nodeType!==1)return x(U,z,G),!1;z.domRef=G,z.children=IU(z.children),n(G,z,K);for(var X=0;X<z.children.length;X++){let Z=z.children[X],_=G.childNodes[X];if(!_)return x(U,Z,_),!1;if(!p(U,Z,_,H,K))return!1}break}return!0}var s={addEventListener:(U,z,G,H)=>{U.addEventListener(z,G,H)},delegator:(U,z,G,H,K)=>{UU(U,z,G,H,K)},isEqual:(U,z)=>{return U===z},getTarget:(U)=>{return U.target},parentNode:(U)=>{return U.parentNode}},HU={getInlineStyle:(U,z)=>{return U.style[z]},firstChild:(U)=>{return U.firstChild},lastChild:(U)=>{return U.lastChild},getAttribute:(U,z)=>{if(z==="class")return U.className;if(z in U)return U[z];return U.getAttribute(z)},getTag:(U)=>{return U.nodeName},getTextContent:(U)=>{return U.textContent},children:(U)=>{return U.childNodes}},KU={mountComponent:function(U,z){return},unmountComponent:function(U){return},modelHydration:function(U,z){return}},QU={nextSibling:(U)=>{if(U.nextSibling)switch(U.nextSibling.type){case 0:return S(U.nextSibling);default:return U.nextSibling.domRef}return null},createTextNode:(U)=>{return document.createTextNode(U)},createElementNS:(U,z)=>{return document.createElementNS(U,z)},appendChild:(U,z)=>{return U.appendChild(z)},replaceChild:(U,z,G)=>{return U.replaceChild(z,G)},removeChild:(U,z)=>{return U.removeChild(z)},createElement:(U)=>{return document.createElement(U)},addClass:(U,z)=>{if(U)z.classList.add(U)},removeClass:(U,z)=>{if(U)z.classList.remove(U)},insertBefore:(U,z,G)=>{return U.insertBefore(z,G)},swapDOMRefs:(U,z,G)=>{let H=U.nextSibling;G.insertBefore(U,z),G.insertBefore(z,H);return},setInlineStyle:(U,z,G)=>{var H;for(let K in U)if(H=z[K],!H)if(K in G.style)G.style[K]="";else G.style.setProperty(K,"");else if(H!==U[K])if(K in G.style)G.style[K]=H;else G.style.setProperty(K,H);for(let K in z){if(U&&U[K])continue;if(K in G.style)G.style[K]=z[K];else G.style.setProperty(K,z[K])}return},setAttribute:(U,z,G)=>{return U.setAttribute(z,G)},setAttributeNS:(U,z,G,H)=>{return U.setAttributeNS(z,G,H)},removeAttribute:(U,z)=>{return U.removeAttribute(z)},setTextContent:(U,z)=>{U.textContent=z;return},flush:()=>{return},getHead:function(){return document.head},getRoot:function(){return document.body}};globalThis.miso={hydrationContext:HU,eventContext:s,drawingContext:QU,componentContext:KU,diff:A,hydrate:d,version:F,callBlur:I,callFocus:L,callSelect:w,callSetSelectionRange:V,eventJSON:B,fetchCore:O,eventSourceConnect:b,eventSourceClose:T,websocketConnect:P,websocketClose:f,websocketSend:j,updateRef:h,inline:g,typeOf:m,mathRandom:v,getRandomValues:u,splitmix32:y,populateClass:k,integrityCheck:a,delegateEvent:D,delegator:s.delegator,setDrawingContext:function(U){let z=globalThis[U].drawingContext,G=globalThis[U].eventContext,H=globalThis[U].componentContext;if(!z)console.error('Custom rendering engine ("drawingContext") is not defined at globalThis[name].drawingContext',U);if(!G)console.error('Custom event delegation ("eventContext") is not defined at globalThis[name].eventContext',U);if(!H)console.error('Custom component context ("componentContext") is not defined at globalThis[name].componentContext',U);globalThis.miso.drawingContext=z,globalThis.miso.eventContext=G,globalThis.miso.componentContext=H}};
