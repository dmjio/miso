var N="1.9.0.0";function T(G,K){var Q=function(){var X=document.getElementById(G);if(X&&X.focus)X.focus()};K>0?setTimeout(Q,K):Q()}function S(G,K){var Q=function(){var X=document.getElementById(G);if(X&&X.blur)X.blur()};K>0?setTimeout(Q,K):Q()}function M(G,K,Q,X,Y,_,Z){var q={method:K,headers:X};if(Q)q.body=Q;let U={},z=null;try{fetch(G,q).then(($)=>{z=$.status;for(let[H,W]of $.headers)U[H]=W;if(!$.ok)throw new Error($.statusText);if(Z=="json")return $.json();else if(Z=="text")return $.text();else if(Z==="arrayBuffer")return $.arrayBuffer();else if(Z==="blob")return $.blob();else if(Z==="bytes")return $.bytes();else if(Z==="formData")return $.formData();else if(Z==="none")return Y({error:null,body:null,headers:U,status:z})}).then(($)=>Y({error:null,body:$,headers:U,status:z})).catch(($)=>_({error:null,body:$,headers:U,status:z}))}catch($){_({body:null,error:$.message,headers:U,status:z})}}function J(G){if(G.children.length===0)return!1;var K=!0;for(let Q of G.children)if(!Q.key){K=!1;break}return K}function C(G){var K=function(Q){let X=null;while(Q&&Q.parentNode){if("componentId"in Q.parentNode){X=Q.parentNode.componentId;break}Q=Q.parentNode}return X};return K(G)}function f(G,K,Q,X,Y,_,Z,q,U){try{let z=new WebSocket(G);return z.onopen=function(){K()},z.onclose=function($){Q($)},z.onerror=function($){console.error($),q("WebSocket error received")},z.onmessage=function($){if(typeof $.data==="string")try{if(U){if(X)X($.data);return}let H=JSON.parse($.data);if(Y)Y(H)}catch(H){if(U&&X)X($.data);else q(H.message)}else if($.data instanceof Blob){if(_)_($.data)}else if($.data instanceof ArrayBuffer){if(Z)Z($.data)}else console.error("Received unknown message type from WebSocket",$),q("Unknown message received from WebSocket")},z}catch(z){q(z.message)}}function P(G){if(G)G.close(),G=null}function F(G,K){if(K&&G&&G.readyState===WebSocket.OPEN)G.send(K)}function L(G,K,Q,X,Y,_){try{let Z=new EventSource(G);return Z.onopen=function(){K()},Z.onerror=function(){Y("EventSource error received")},Z.onmessage=function(q){try{if(_){if(Q)Q(q.data);return}let U=JSON.parse(q.data);if(X)X(U)}catch(U){if(_&&Q)Q(q.data);else Y(U.message)}},Z}catch(Z){Y(Z.message)}}function I(G){if(G)G.close(),G=null}function O(G){var K=r(o(),G);if(!K.shouldSync)K.shouldSync=J(K);return K}function r(G,K){return Object.assign({},G,K)}function o(){return{props:{},css:{},children:[],ns:"html",domRef:null,tag:"div",key:null,events:{},onDestroyed:()=>{},onBeforeDestroyed:()=>{},onCreated:()=>{},onBeforeCreated:()=>{},shouldSync:!1,type:"vnode"}}function V(G,K,Q,X){if(!G&&!K)return;else if(!G&&K)UG(K,Q,X);else if(!K)n(G,Q,X);else if(G.type===K.type)t(G,K,Q,X);else l(G,K,Q,X)}function l(G,K,Q,X){if(g(G),K.type==="vtext")K.domRef=X.createTextNode(K.text),X.replaceChild(Q,K.domRef,G.domRef);else k(K,X,(Y)=>{X.replaceChild(Q,Y,G.domRef)});w(G)}function n(G,K,Q){g(G),Q.removeChild(K,G.domRef),w(G)}function t(G,K,Q,X){if(G.type==="vtext"){if(G.text!==K.text)X.setTextContent(G.domRef,K.text);K.domRef=G.domRef;return}if(K.tag===G.tag&&K.key===G.key&&K.type===G.type)K.domRef=G.domRef,D(G,K,X);else l(G,K,Q,X)}function w(G){e(G);for(let K in G.children)w(G.children[K])}function e(G){if(G.onDestroyed)G.onDestroyed();if(G.type==="vcomp")$G(G)}function GG(G){if(G.onBeforeDestroyed)G.onBeforeDestroyed()}function g(G){if(G.type==="vcomp"&&G.onBeforeUnmounted)G.onBeforeUnmounted();GG(G);for(let K in G.children)g(G.children[K])}function A(G,K){if(G.onCreated)G.onCreated(G.domRef);if(G.type==="vcomp")zG(G,K)}function KG(G){if(G.onBeforeCreated)G.onBeforeCreated()}function D(G,K,Q){if(K.type!=="vtext"){if(!G)G=O({});if(QG(G.props,K.props,K.domRef,K.ns==="svg",Q),XG(G.css,K.css,K.domRef,Q),K.type==="vnode")YG(G,K,K.domRef,Q);_G(K)}}function QG(G,K,Q,X,Y){var _;for(let Z in G)if(_=K[Z],_===void 0)if(X||!(Z in Q)||Z==="disabled")Y.removeAttribute(Q,Z);else Y.setAttribute(Q,Z,"");else{if(_===G[Z]&&Z!=="checked"&&Z!=="value")continue;if(X)if(Z==="href")Y.setAttributeNS(Q,"http://www.w3.org/1999/xlink","href",_);else Y.setAttribute(Q,Z,_);else if(Z in Q&&!(Z==="list"||Z==="form"))Q[Z]=_;else Y.setAttribute(Q,Z,_)}for(let Z in K){if(G&&G[Z])continue;if(_=K[Z],X)if(Z==="href")Y.setAttributeNS(Q,"http://www.w3.org/1999/xlink","href",_);else Y.setAttribute(Q,Z,_);else if(Z in Q&&!(Z==="list"||Z==="form"))Q[Z]=K[Z];else Y.setAttribute(Q,Z,_)}}function XG(G,K,Q,X){X.setInlineStyle(G,K,Q)}function YG(G,K,Q,X){if(G.shouldSync&&K.shouldSync)qG(G.children,K.children,Q,X);else{let Y=K.children.length>G.children.length?K.children.length:G.children.length;for(let _=0;_<Y;_++)V(G.children[_],K.children[_],Q,X)}}function ZG(G,K){if(G.ns==="svg")G.domRef=K.createElementNS("http://www.w3.org/2000/svg",G.tag);else if(G.ns==="mathml")G.domRef=K.createElementNS("http://www.w3.org/1998/Math/MathML",G.tag);else G.domRef=K.createElement(G.tag)}function k(G,K,Q){KG(G),ZG(G,K),A(G,K),Q(G.domRef),D(null,G,K)}function _G(G){if(G.tag==="canvas"&&"draw"in G)G.draw(G.domRef)}function $G(G){if("onUnmounted"in G)G.onUnmounted(G.domRef);G.unmount(G.domRef)}function zG(G,K){if(G.onBeforeMounted)G.onBeforeMounted();G.mount(G.domRef,(Q,X)=>{if(G.children.push(X),K.appendChild(G.domRef,X.domRef),G.onMounted)G.onMounted(G.domRef)})}function UG(G,K,Q){if(G.type==="vtext")G.domRef=Q.createTextNode(G.text),Q.appendChild(K,G.domRef);else k(G,Q,(X)=>{Q.appendChild(K,X)})}function qG(G,K,Q,X){var Y=0,_=0,Z=G.length-1,q=K.length-1,U,z,$,H,W,E,i;for(;;){if(_>q&&Y>Z)break;if(z=K[_],$=K[q],W=G[Y],H=G[Z],Y>Z)V(null,z,Q,X),X.insertBefore(Q,z.domRef,W?W.domRef:null),G.splice(_,0,z),_++;else if(_>q){U=Z;while(Z>=Y)X.removeChild(Q,G[Z--].domRef);G.splice(Y,U-Y+1);break}else if(W.key===z.key)V(G[Y++],K[_++],Q,X);else if(H.key===$.key)V(G[Z--],K[q--],Q,X);else if(W.key===$.key&&z.key===H.key)X.swapDOMRefs(H.domRef,W.domRef,Q),HG(G,Y,Z),V(G[Y++],K[_++],Q,X),V(G[Z--],K[q--],Q,X);else if(W.key===$.key)X.insertBefore(Q,W.domRef,X.nextSibling(H.domRef)),G.splice(Z,0,G.splice(Y,1)[0]),V(G[Z--],K[q--],Q,X);else if(H.key===z.key)X.insertBefore(Q,H.domRef,W.domRef),G.splice(Y,0,G.splice(Z,1)[0]),V(G[Y++],z,Q,X),_++;else{E=!1,U=Y;while(U<=Z){if(G[U].key===z.key){E=!0,i=G[U];break}U++}if(E)G.splice(Y,0,G.splice(U,1)[0]),V(G[Y++],z,Q,X),X.insertBefore(Q,i.domRef,G[Y].domRef),_++;else k(z,X,(s)=>{X.insertBefore(Q,s,W.domRef)}),G.splice(Y++,0,z),_++,Z++}}}function HG(G,K,Q){let X=G[K];G[K]=G[Q],G[Q]=X}function h(G,K,Q,X,Y){for(let _ of K)Y.addEventListener(G,_.name,function(Z){v(Z,G,Q,X,Y)},_.capture)}function y(G,K,Q,X,Y){for(let _ of K)Y.removeEventListener(G,_.name,function(Z){v(Z,G,Q,X,Y)},_.capture)}function v(G,K,Q,X,Y){Q(function(_){if(Array.isArray(G))for(let Z of G)b(Z,_,K,X,Y);else b(G,_,K,X,Y)})}function b(G,K,Q,X,Y){var _=Y.getTarget(G);if(_){var Z=WG(Q,_,Y);x(G,K,Z,[],X,Y)}}function WG(G,K,Q){var X=[];while(!Q.isEqual(G,K))if(X.unshift(K),K&&Q.parentNode(K))K=Q.parentNode(K);else return X;return X}function x(G,K,Q,X,Y,_){if(!Q.length){if(Y)console.warn('Event "'+G.type+'" did not find an event handler to dispatch on',K,G);return}else if(Q.length>1){X.unshift(K);for(var Z in K.children){var q=K.children[Z];if(q.type==="vcomp")continue;if(_.isEqual(q.domRef,Q[1])){x(G,q,Q.slice(1),X,Y,_);break}}}else{let U=K.events[G.type];if(U){let z=U.options;if(z.preventDefault)G.preventDefault();if(U.runEvent(G,Q[0]),!z.stopPropagation)j(X,G)}else j(X,G)}}function j(G,K){for(let Q of G)if(Q.events[K.type]){let X=Q.events[K.type],Y=X.options;if(Y.preventDefault)K.preventDefault();if(X.runEvent(K,Q.domRef),Y.stopPropagation){K.stopPropagation();break}}}function R(G,K){if(typeof G[0]==="object"){var Q=[];for(var X=0;X<G.length;X++)Q.push(R(G[X],K));return Q}for(let q of G)K=K[q];var Y;if(K instanceof Array||"length"in K&&K.localName!=="select"){Y=[];for(var _=0;_<K.length;_++)Y.push(R([],K[_]));return Y}Y={};for(var Z in VG(K)){if(K.localName==="input"&&(Z==="selectionDirection"||Z==="selectionStart"||Z==="selectionEnd"))continue;if(typeof K[Z]=="string"||typeof K[Z]=="number"||typeof K[Z]=="boolean")Y[Z]=K[Z]}return Y}function VG(G){var K={},Q=0;do{var X=Object.getOwnPropertyNames(G);for(Q=0;Q<X.length;Q++)K[X[Q]]=null}while(G=Object.getPrototypeOf(G));return K}function JG(G){var K=0,Q=G.length>0?[G[0]]:[];for(var X=1;X<G.length;X++){if(Q[K].type==="vtext"&&G[X].type==="vtext"){Q[K].text+=G[X].text;continue}Q[++K]=G[X]}return Q}function RG(G,K){var Q=0,X,Y=K.getRoot();if(!G)if(Y.childNodes.length>0)X=Y.firstChild;else X=Y.appendChild(K.createElement("div"));else if(G.childNodes.length===0)X=G.appendChild(K.createElement("div"));else{while(G.childNodes[Q]&&(G.childNodes[Q].nodeType===3||G.childNodes[Q].localName==="script"))Q++;if(!G.childNodes[Q])X=Y.appendChild(K.createElement("div"));else X=G.childNodes[Q]}return X}function u(G,K,Q,X){let Y=RG(K,X);if(!a(G,Q,Y,X)){if(G)console.warn("[DEBUG_HYDRATE] Could not copy DOM into virtual DOM, falling back to diff");while(X.firstChild(Y))X.removeChild(Y,X.lastChild(Y));return Q.domRef=Y,D(null,Q,X),!1}else if(G)if(!B(Q,X))console.warn("[DEBUG_HYDRATE] Integrity check completed with errors");else console.info("[DEBUG_HYDRATE] Successfully prerendered page");return!0}function m(G,K,Q){if(G)console.warn("[DEBUG_HYDRATE] VTree differed from node",K,Q)}function p(G){if(G.substr(0,1)=="#"){let K=(G.length-1)/3,Q=[17,1,0.062272][K-1];return[Math.round(parseInt(G.substr(1,K),16)*Q),Math.round(parseInt(G.substr(1+K,K),16)*Q),Math.round(parseInt(G.substr(1+2*K,K),16)*Q)]}else return G.split("(")[1].split(")")[0].split(",").map((K)=>{return+K})}function B(G,K){return d(!0,G,K)}function d(G,K,Q){if(K.type=="vtext"){if(Q.getTag(K.domRef)!=="#text")console.warn("VText domRef not a TEXT_NODE",K),G=!1;else if(K.text!==Q.getTextContent(K.domRef))console.warn("VText node content differs",K),G=!1}else{if(K.tag.toUpperCase()!==Q.getTag(K.domRef).toUpperCase())console.warn("Integrity check failed, tags differ",K.tag.toUpperCase(),Q.getTag(K.domRef)),G=!1;if("children"in K&&K.children.length!==Q.children(K.domRef).length)console.warn("Integrity check failed, children lengths differ",K,K.children,Q.children(K.domRef)),G=!1;for(let X in K.props)if(X==="href"||X==="src"){let Y=window.location.origin+"/"+K.props[X],_=Q.getAttribute(K.domRef,X),Z=K.props[X];if(Y!==_&&Z!==_&&Z+"/"!==_&&Y+"/"!==_)console.warn("Property "+X+" differs",K.props[X],Q.getAttribute(K.domRef,X)),G=!1}else if(X==="height"||X==="width"){if(parseFloat(K.props[X])!==parseFloat(Q.getAttribute(K.domRef,X)))console.warn("Property "+X+" differs",K.props[X],Q.getAttribute(K.domRef,X)),G=!1}else if(X==="class"||X==="className"){if(K.props[X]!==Q.getAttribute(K.domRef,"class"))console.warn("Property class differs",K.props[X],Q.getAttribute(K.domRef,"class")),G=!1}else if(K.props[X]!==Q.getAttribute(K.domRef,X))console.warn("Property "+X+" differs",K.props[X],Q.getAttribute(K.domRef,X)),G=!1;for(let X in K.css)if(X==="color"){if(p(Q.getInlineStyle(K.domRef,X)).toString()!==p(K.css[X]).toString())console.warn("Style "+X+" differs",K.css[X],Q.getInlineStyle(K.domRef,X)),G=!1}else if(K.css[X]!==Q.getInlineStyle(K.domRef,X))console.warn("Style "+X+" differs",K.css[X],Q.getInlineStyle(K.domRef,X)),G=!1;for(let X of K.children){let Y=d(G,X,Q);G=G&&Y}}return G}function a(G,K,Q,X){switch(K.type){case"vcomp":K.domRef=Q,A(K,X);break;case"vtext":K.domRef=Q;break;default:K.domRef=Q,K.children=JG(K.children),A(K,X);for(var Y=0;Y<K.children.length;Y++){let _=K.children[Y],Z=Q.childNodes[Y];if(!Z)return m(G,_,Z),!1;switch(_.type){case"vtext":if(Z.nodeType!==3)return m(G,_,Z),!1;if(_.text===Z.textContent)_.domRef=X.children(Q)[Y];else return m(G,_,Z),!1;break;default:if(Z.nodeType!==1)return!1;_.domRef=Z,a(G,_,Z,X);break}}}return!0}var c={addEventListener:(G,K,Q,X)=>{G.addEventListener(K,Q,X)},removeEventListener:(G,K,Q,X)=>{G.removeEventListener(K,Q,X)},firstChild:(G)=>{return G.firstChild},lastChild:(G)=>{return G.lastChild},parentNode:(G)=>{return G.parentNode},nextSibling:(G)=>{return G.nextSibling},createTextNode:(G)=>{return document.createTextNode(G)},createElementNS:(G,K)=>{return document.createElementNS(G,K)},appendChild:(G,K)=>{return G.appendChild(K)},replaceChild:(G,K,Q)=>{return G.replaceChild(K,Q)},removeChild:(G,K)=>{return G.removeChild(K)},createElement:(G)=>{return document.createElement(G)},insertBefore:(G,K,Q)=>{return G.insertBefore(K,Q)},swapDOMRefs:(G,K,Q)=>{let X=G.nextSibling;Q.insertBefore(G,K),Q.insertBefore(K,X);return},querySelectorAll:(G)=>{return document.querySelectorAll(G)},setInlineStyle:(G,K,Q)=>{var X;for(let Y in G)if(X=K[Y],!X)Q.style[Y]="";else if(X!==G[Y])Q.style[Y]=X;for(let Y in K){if(G&&G[Y])continue;Q.style[Y]=K[Y]}return},getInlineStyle:(G,K)=>{return G.style[K]},setAttribute:(G,K,Q)=>{return G.setAttribute(K,Q)},getAttribute:(G,K)=>{if(K==="class")return G.className;if(K in G)return G[K];return G.getAttribute(K)},setAttributeNS:(G,K,Q,X)=>{return G.setAttributeNS(K,Q,X)},removeAttribute:(G,K)=>{return G.removeAttribute(K)},setTextContent:(G,K)=>{G.textContent=K;return},getTag:(G)=>{return G.nodeName},getTextContent:(G)=>{return G.textContent},children:(G)=>{return G.childNodes},isEqual:(G,K)=>{return G===K},getTarget:(G)=>{return G.target},flush:()=>{return},getRoot:()=>{return document.body}};globalThis.miso={};globalThis.miso.diff=V;globalThis.miso.hydrate=u;globalThis.miso.version=N;globalThis.miso.delegate=h;globalThis.miso.callBlur=S;globalThis.miso.callFocus=T;globalThis.miso.eventJSON=R;globalThis.miso.fetchCore=M;globalThis.miso.eventSourceConnect=L;globalThis.miso.eventSourceClose=I;globalThis.miso.websocketConnect=f;globalThis.miso.websocketClose=P;globalThis.miso.websocketSend=F;globalThis.miso.undelegate=y;globalThis.miso.getParentComponentId=C;globalThis.miso.shouldSync=J;globalThis.miso.integrityCheck=B;globalThis.miso.context=c;globalThis.miso.setDrawingContext=function(G){let K=globalThis[G];if(!K)console.warn("Custom rendering engine is not defined",G,globalThis[G]);else globalThis.miso.context=K};
